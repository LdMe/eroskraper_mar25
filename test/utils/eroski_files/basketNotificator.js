(function(){define(["jquery","t5/core/dom","common/zone/zoneAppender","common/tracking","components/basket/unavailableProductsOverlay"],function(i,h,c,f,l){var a;var e;var m=false;var g=false;var d=0;function k(q){d--;var s=i(q);if(d>0){var t=s.find(".product-notification-block");var r=t.first();r.fadeOut("slow",function(){r.remove()})}else{g=false;s.fadeOut("slow");var p=s.first();p.empty()}}var j=function(p){d++;if(!g){g=true;i(p).first().slideDown("slow")}setTimeout(function(){k(p);if(m){l.checkIfShowAlert();m=false}},3000)};var n=function(r,p){p=typeof p!=="undefined"&&p?true:false;var u=i("#"+e);if(u.length>0){m=p;var t=JSON.stringify(r.reverse());var q={messages:t,error:r.error};if(q.error===undefined){q.error=false}u.attr("data-zone-parameters",JSON.stringify(q));c.deferredZoneUpdate(u,a);var v=jQuery.parseJSON(t);for(var s=0;s<v.length;s++){var z=v[s];if(z!=null){var x=z.description;if(x&&x.length>0){var y={};y.event="popUp";y.eventAction="alerts";y.eventLabel=x;var w=JSON.stringify(y);f.init(w)}}}}};var o=function(q,p){a=q;e=p;h.onDocument(c.events.zone.didUpdate,"#"+e,function(){j("#"+e);this.attr("data-zone-parameters","")})};var b=function b(t,w,q,v,r,s,p){var u=function(){var x=[{title:t,imageUri:w,description:q,ploy:r,ploySymbol:s,cssClass:p}];n(x)};setTimeout(u,v)};return{init:o,addNotification:n,addJavaNotification:b}})}).call(this);