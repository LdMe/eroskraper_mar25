(function(){define(["jquery","underscore","t5/core/dom","t5/core/events","common/config/device","common/scroll/scrolling","t5/core/zone","common/scroll/customScroll","common/config/globalConfig","common/loadingSpinner","history"],function(R,at,e,D,aj,ao,ar,b,F,ac,o){var k=false;var f=".product-menu-content .order .menu-selector, .product-menu-content .offer-type .menu-selector";var c=".product-menu-content .filter .menu-selector, .product-menu-content .category .menu-selector";var w=".product-menu-content .filter .menu-selector.active";var a=".range-price";var Y=".filter .global-filters-btns";var af="";var B=null;var ab,E,j,T,ah,i,s,J,am,N,M,C;function an(){R(".product-menu").css("top","");R(".product-menu").css("position","")}function al(){R(".more-filters").off();R(".more-feature-filters").off();R(".product-menu-content .filters-btns .close").off();R(".product-menu-content .apply-filters").off();R(".product-menu-content .remove-filters").off();R(".menu-first-level-item .title").off()}function P(aw,av,au,ax){am=R(window).innerHeight();T=aw;ah=av;i=au;s=ax}R.fn.imageLoad=function(au){this.load(au);this.each(function(){if(this.complete&&this.naturalWidth!==0){R(this).trigger("load")}})};function ak(){if(!aj.isDesktop()){var au={cursorcolor:"#D8D8D8",cursorwidth:"10px",boxzoom:true};R(".product-menu").niceScroll(au)}}function h(au){if(aj.isDesktop()){R(this).closest(".menu-first-level-item").toggleClass("closed");if(R(this).closest(".menu-first-level-item").hasClass("closed")){R(this).next(".tooltip").text(R(this).next(".tooltip").data("unfoldtext"))}else{R(this).next(".tooltip").text(R(this).next(".tooltip").data("foldtext"))}R(this).closest(".menu-first-level-item").children(".menu-second-level").slideToggle(500)}else{R(this).closest(".menu-first-level-item").toggleClass("mobile-closed");setTimeout(function(){R(".product-menu").getNiceScroll().resize()},700)}}function S(au){if(au){R(window).resize(function(){S(false)})}R(".menu-first-level-item.category .title,.menu-first-level-item.order .title,.menu-first-level-item.offer-type .title").off("click",h);R(".quality_subtitle,.quality_title").off("click");R(".brand_title").off("click");R(".caracteristics_title").off("click");R(".feature_title").off("click");R(".menu-first-level-item.category .title,.menu-first-level-item.order .title,.menu-first-level-item.offer-type .title").on("click",h);R(".quality_subtitle,.quality_title").on("click",function(av){if(aj.isDesktop()){R(this).toggleClass("closed");if(R(this).hasClass("closed")){R(this).next(".tooltip").text(R(this).next(".tooltip").data("unfoldtext"))}else{R(this).next(".tooltip").text(R(this).next(".tooltip").data("foldtext"))}R(this).next(".tooltip").next(".closable-filter-list").slideToggle(500)}else{R(this).toggleClass("mobile-closed");setTimeout(function(){R(".product-menu").getNiceScroll().resize()},700)}});R(".brand_title").on("click",function(av){if(aj.isDesktop()){R(this).toggleClass("closed");if(R(this).hasClass("closed")){R(this).next(".tooltip").text(R(this).next(".tooltip").data("unfoldtext"))}else{R(this).next(".tooltip").text(R(this).next(".tooltip").data("foldtext"))}R(".brand_closable_list").slideToggle(500);R(".more-filters").toggle()}else{R(this).toggleClass("mobile-closed");R(".more-filters").toggle();setTimeout(function(){R(".product-menu").getNiceScroll().resize()},700)}});R(".feature_title").each(function(){R(this).on("click",function(av){if(aj.isDesktop()){R(this).toggleClass("closed");if(R(this).hasClass("closed")){R(this).next(".tooltip").text(R(this).next(".tooltip").data("unfoldtext"))}else{R(this).next(".tooltip").text(R(this).next(".tooltip").data("foldtext"))}R(this).parent().find(".feature_closable_list").slideToggle(500);R(this).parent().find(".more-feature-filters").toggle()}else{R(this).toggleClass("mobile-closed");R(this).parent().find(".more-feature-filters").toggle();setTimeout(function(){R(".product-menu").getNiceScroll().resize()},700)}})});R(".caracteristics_title").on("click",function(av){if(aj.isDesktop()){R(this).toggleClass("closed");if(R(this).hasClass("closed")){R(this).next(".tooltip").text(R(this).next(".tooltip").data("unfoldtext"))}else{R(this).next(".tooltip").text(R(this).next(".tooltip").data("foldtext"))}R(".caracteristic_closable_list").slideToggle(500)}else{R(this).toggleClass("mobile-closed");setTimeout(function(){R(".product-menu").getNiceScroll().resize()},700)}})}function ai(ax,aw,av,au,az,ay){P(ax,aw,av,az);ap();R(window).scrollTop(0);v();t();n(av);af=ay;S(true);R(".feature_title").click();R(document).ready(function(){R("#banners-wrapper-desk img").imageLoad(function(){an()});W()});R(w).each(function(aA){ac.hideBodyLoading()});if(ay){if(aj.isDesktop()){R(".category.with-offers").closest(".menu-first-level-item").removeClass("closed");R(".category.with-offers").find(".tooltip").text(R(".category.with-offers").find(".tooltip").data("foldtext"));R(".category.with-offers").closest(".menu-first-level-item").children(".menu-second-level").slideToggle(500)}}}function n(au){if(k===false){e.onDocument(D.zone.willUpdate,"#"+au,function(){ac.hideBodyLoading()});Q();k=true}}R(document).on("doReset",function(){al();an();ap()});R(window).on("resize",function(){al();an();ap();K()});function W(){if(localStorage.getItem("scrollPosition")){R(window).scrollTop(localStorage.getItem("scrollPosition"));localStorage.removeItem("scrollPosition")}}function ap(){if(aj.isDesktop()){A();p()}else{A();p();Z();u()}ag();aa();m();X();b.init();x();if(R(".wrap-product").length){t()}}function u(){R(".button.secondary-button.close").off().on("click",function(au){R(".product-menu.menu-active").removeClass("menu-active");R("body").css("overflow","initial")})}function q(){var au=R(".product-menu .marcas li");au.removeClass("hide-item")}function A(){var au=R(".product-menu .marcas li");function aw(){R.each(au,function(ay){R(au[ay+4]).addClass("hide-item")})}if(!aj.isTablet()){aw();var av=R(".more-filters");av.removeClass("less-filters");av.text(av.data("text-see-more"));var ax=R(".more-feature-filters");ax.removeClass("less-filters");ax.text(ax.data("text-see-more"))}R(".more-filters").off().on("click",function(aA){if(aA){aA.preventDefault()}var aB=au.length;if(aB>=4){if(R(this).hasClass("less-filters")){R(this).removeClass("less-filters");var az=R(this).data("text-see-more");R(this).text(az);aw();b.resetAll();return true}au.removeClass("hide-item");R(this).addClass("less-filters");var ay=R(this).data("text-see-less");R(this).text(ay);b.resetAll()}});R(".more-feature-filters").each(function(){R(this).click(function(){if(R(this).hasClass("less-filters")){var aA=R(this).closest(".menu-second-level-item").find(".show-item");aA.removeClass("show-item");aA.addClass("hide-item");R(this).removeClass("less-filters");var az=R(this).data("text-see-more");R(this).text(az);b.resetAll();return true}var aA=R(this).closest(".menu-second-level-item").find(".hide-item");aA.addClass("show-item");aA.removeClass("hide-item");R(this).addClass("less-filters");var ay=R(this).data("text-see-less");R(this).text(ay);b.resetAll()})})}function aa(){R(f).off().on("click",function(au){l(R(this),au,true,"order");R(".product-menu-content .apply-filters").trigger("click")})}function m(){R(c).off().on("click",function(au){l(R(this),au,false,"filter")});R(a).off().on("click",function(au){l(R(this),au,false,"filter")})}function l(az,ay,aw,ax){if(ay){ay.preventDefault()}var av="active";var aA=ax==="filter"&&az.parents(".category").length>0;var au=aA&&az.attr("data-ac")!==undefined;if(az.hasClass(av)){L(az,av,au);z(az,au);U()}else{O(az,av,aA,au,aw);console.log("self1:"+az);ae();U();console.log("self2:"+az)}ag();V(az)}function ae(){var ay=R(".menu-selector.dropdown-menu-button.active.open").last();var aw=window.location;var ax="";var aA=R("<span> / </span>");var av=R(".breadcrumblink").last();var au=R(".product-lineal-title").first();if(av.length===0&&au.length!==0){ax=" "+R(au).text()}else{R(".menu-selector ").each(function(){var aD=ay.text();var aC=R(this).attr("data-ac");if(R(this).text()===aD&&aC!=null){ax=aD}})}if(ax!==""){var aB=false;R(".breadcrumblink").each(function(){var aC=ay.text();if(R(this).text()===aC){aB=true}});if(aB===false){R(".m__breadcrumb__path").append(aA);var az=R('<a href="'+aw+'" title="'+ax+'" class="breadcrumblink" rel="nofollow"><span>'+ax+"</span></a>");R(".m__breadcrumb__path").append(az)}}}function z(ay,au){var aw=R(".breadcrumblink");var ax=aw.last();if(R(".m__breadcrumb__path span").length>1){var aA=R(".menu-selector.active");if((au===false)&&(aA.length<3)){ax.remove();R(".m__breadcrumb__path span").last().remove()}else{if(au===true){var az=false;var av=R(ay).text();aw.each(function(){var aB=R(this).text();if(av==aB){az=true}if(az===true){this.remove();R(".m__breadcrumb__path span").last().remove()}});R(".breadcrumblink").last().remove();R(".m__breadcrumb__path span").last().remove();if(R(".breadcrumblink").length===0&&R(".m__breadcrumb__path span").length>1){R(".m__breadcrumb__path span").last().remove()}}}}}function U(){var aw=R(".breadcrumblink").last();if(R(".breadcrumblink").length===0){aw=R(".breadcrumbstart").first()}var au=aw.attr("href");var av=aw.text();R(".breadcrumbspan").first().text(av);R(".m__breadcrumb__goto a").first().attr("href",au)}function L(aw,av,au){if(au===true){av+=" open";aw.parent().find(".active").removeClass(av)}aw.removeClass(av)}function O(ax,av,ay,au,aw){if(au===true){av+=" open";aw=true}if(ay){ax.parents(".menu-second-level").find(".dropdown-menu-button").addClass("active open")}if(aw===true){ax.parent().parent().find(".menu-selector").removeClass(av)}ax.addClass(av)}function V(au){H(au,i,T);ar.deferredZoneUpdate(i,T)}function H(av,au,ax){var aw=I(av);var ay=JSON.stringify(at.extend({"t:ac2":aw.activationContext},aw.filterParameters));ac.showBodyLoading({selector:".product-menu"});R("#"+au).attr("data-zone-parameters",ay);y(aw.activationContextPath,au,ay,ax)}function I(au){var ax=[];var az=[];var av="";var aw=R('input[name^="minPrice"]').val();var ay=R('input[name^="maxPrice"]').val();if(aw||ay){if(!aw){aw="0"}if(!ay){ay=""}ax.push("PRICE_"+aw+"-"+ay)}au.closest(".product-menu").find(".menu-selector.active").each(function(){var aB=R(this).data("filter");if(aB){ax.push(aB)}var aA=R(this).data("ac");if(aA){az.push(aA);av+="/"+aA}});if(az.length===0&&au.data("ac")){az="";av=""}return{activationContext:az,activationContextPath:av,filterParameters:{filter:ax}}}function r(au){var az=au.split("/");var aw;if(az.length>1){aw=az[1]}else{if(af!=""){aw=af+"-"}}var ay=o.location.pathname;var av=ay.search(aw);var ax=av===-1?ay+au:ay.replace(ay.substr(av),au);ax+=o.location.search;return ax.replace("//","/")}function y(aw,au,av,ax){var az=r(aw);var ay={zoneId:au,dataZoneParameters:av,url:ax};B=ay;o.pushState(ay,null,az)}function Q(){R(window).on("popstate",function(av){var au=av.state||(av.originalEvent?av.originalEvent.state:undefined);if(au&&au.zoneId&&au.dataZoneParameters&&au.url){R("#"+au.zoneId).attr("data-zone-parameters",au.dataZoneParameters);ar.deferredZoneUpdate(au.zoneId,au.url)}else{if(B){R("#"+B.zoneId).attr("data-zone-parameters",JSON.stringify(at.extend({"t:ac2":[]},[])));ar.deferredZoneUpdate(B.zoneId,B.url);B=null}}})}function d(){R(".product-menu-content .filters-btns").removeClass("displayed").hide();R(".product-menu-content .filters-btns .remove-filters").removeClass("secondary-color left-button displayed").hide();R(".product-menu-content .filters-btns .apply-filters").removeClass("displayed").hide();R(".product-menu-content .filters-btns .close").removeClass("left-button displayed").hide()}function ag(){var au=R(Y);if(aj.isDesktop()&&R(".menu-selector.active").length){au.show();R(".product-menu").css("padding-bottom","9rem");R(".product-menu li.filter").css("margin-bottom","5rem")}else{au.hide();R(".product-menu").css("padding-bottom","0rem");R(".product-menu li.filter").css("margin-bottom","0")}}function X(){var au=R(Y);au.children(".remove-filters").first().off().on("click",function(av){if(av){av.preventDefault()}if(R(c).hasClass("active")){R(c).removeClass("active")}if(R(f).hasClass("active")){R(f).removeClass("active")}V(R(this));au.hide()})}function t(){ab=0;if(R(".product-menu").length){R(window).on("load",function(){ab=R(".product-menu").offset().top})}if(aj.isDesktop()){R(".product-menu").css("top","initial");R(".product-menu").css("position","fixed");R(".product-menu").css("bottom","initial");R(".product-menu .product-menu-content").css("touch-action","inherit");R(".product-menu").css("overflow","inherit")}R(window).on("scroll",function(ax){var av=R(".product-menu");M=R(".header").outerHeight();N=R("#banners-wrapper-desk").outerHeight();C=R(".m__breadcrumb").outerHeight();if(ax){ax.preventDefault()}j=R(window).scrollTop();ab=av.offset().top;E=ab-M;var aw=R("footer").offset().top;if(aj.isDesktop()){aq(av,M,N,C,j);if(j>=aw-R(window).innerHeight()+90){if(aj.isDesktop()){if(aj.isIOS()){av.css({top:M,bottom:((j+am)-aw+50)})}else{var az=M;if((aw-R(window).innerHeight())<0){az=M+N-j}av.css({top:az,bottom:(j+am-aw)})}}}}else{var au=R(window).innerHeight();var ay=R("body").outerHeight();if((j>(N+C))&&((ay-90)>(au-M))){av.css("position","fixed");R(".product-lineal").css("margin-top",R(".order-filter").outerHeight());av.css({top:M,bottom:"inherit",overflow:"hidden"});R(".product-menu .product-menu-content").css("touch-action","none")}else{av.css("position","relative");R(".product-lineal").css("margin-top","0");av.css({top:"inherit",bottom:"inherit",overflow:"inherit"});R(".product-menu .product-menu-content").css("touch-action","inherit")}}})}function G(av){var au=R(".product-menu");R(".menu-first-level-item").removeClass("active");au.css("height","auto");R(".wrap-product").css("height","auto");au.removeClass("menu-active");au.css("top","");R("header").css("display","block");R(".m__breadcrumb").css("display","block");R(".product-lineal").css("display","block");R("#banners-wrapper-desk").css("display","block");d();g(av)}function g(au){if(au===true&&J){R(".menu-first-level-item .active").removeClass("active");J.addClass("active")}J=undefined}function p(){if(aj.isDesktop()){var au=R(".product-menu");M=R(".header").height();N=R("#banners-wrapper-desk").outerHeight();C=R(".m__breadcrumb").outerHeight();j=R(window).scrollTop();if(aj.isDesktop()){aq(au,M,N,C,j)}}R(".remove-price").off().on("click",function(av){R('input[name^="minPrice"]').val("");R('input[name^="maxPrice"]').val("");l(R(this),av,false,"filter")})}function aq(ay,aw,av,ax,au){if((au<=(av+ax+90))&&aj.isDesktop()&&!aj.isTablet()){ay.css("top","inherit");ay.css("position","inherit");ay.css("bottom","inherit");ay.css("overflow","inherit");R(".product-menu .product-menu-content").css("touch-action","inherit")}else{if((au<=(ax+50))&&aj.isTablet()){ay.css("top","inherit");ay.css("position","inherit");ay.css("bottom","inherit");ay.css("overflow","inherit");R(".product-menu .product-menu-content").css("touch-action","inherit")}else{ad(ay,aw);ay.css("overflow","hidden");R(".product-menu .product-menu-content").css("touch-action","none")}}}function ad(au,av){au.css("top",av+"px");au.css("position","fixed");au.css("bottom","0")}function x(){if(aj.isMobile()){R(".category .menu-selector").on("click",function(){if(!R(this).parent("li").hasClass("menu-fourth-level-item")){H(R(this),s,ah);ar.deferredZoneUpdate(s,ah)}})}}function v(){if(aj.isMobile()&&R(".product-menu").hasClass("menu-active")){R(".product-menu").css("position","fixed")}}function K(){if(aj.isTablet()&&!aj.isIOS()){if(R(".priceRangeForm input").is(":focus")){R(".product-menu-content").scrollTo(".priceRangeForm")}}}function Z(){R(".menu-first-level-item").each(function(){R(this).addClass("closed")});R(".order-filter").off().on("click",function(){R(".product-menu").addClass("menu-active");R("body").css("overflow","hidden");ak()})}return{init:ai,initFilter:p,resetFilterPosition:an,initMobileFilters:ak,doAddBreadcrumb:ae}})}).call(this);