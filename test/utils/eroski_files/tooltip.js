(function(){define(["jquery","common/config/device"],function(e,r){var l;var n;var t;function s(){o();q();k();if(r.isMobile()){v()}}e(document).on("doReset",function(){s()});var d=function(w){w.stopPropagation()};var h=function(w){w.stopPropagation()};var u=function(){i()};var f=function(){c(e(this))};function k(){if(r.isMobile()){l="click";n="click";e(".tooltip-container:not(.only-desktop-tooltip-container)").on(l,d);e(window).on(l,i);e(".tooltip-close a.button").on("click",i);if(r.isIOS()){e(".tooltip-container:not(.only-desktop-tooltip-container)").on("touchstart",h);e(window).on("touchstart",i)}e(".tooltip-icon.popover").on(l,f)}else{if(r.isTablet()){l="click";n="click";e(".tooltip-icon").on(n,u);e(".tooltip-icon").on(l,f);e(".container-clicable").on(n,function(){i()});e(".container-clicable").on(l,function(){c(e(this).find(".tooltip-icon"))})}else{l="mouseover";n="mouseout";e(".tooltip-icon:not(.tooltip-clicable)").on(n,u);e(".tooltip-icon:not(.tooltip-clicable)").on(l,f);e(".container-clicable").on(n,function(){i()});e(".container-clicable").on(l,function(){c(e(this).find(".tooltip-icon"))})}}}function q(){e(".tooltip-icon").each(function(){var A=e(this);var C=A.next().find(".tooltip-text").outerHeight(true);var B=A.next().find(".tooltip-text").outerWidth(true);if(e(".tooltip-content").length===0){return true}A.next(".tooltip-content").css({left:B/-2});var z;var y=A.offset().top-e(document).scrollTop();if(y<A.next(".tooltip-content").outerHeight(true)){A.parents(".tooltip-container").addClass("top-arrow");z=C+45-C}else{A.parents(".tooltip-container").removeClass("top-arrow");z=C*-1-45}A.next(".tooltip-content").css({top:z,left:B/-2});if(A.next(".tooltip-content").offset()!=null){var x=A.next(".tooltip-content").offset().left+B;var w=((A.next(".tooltip-content").offset().left+B)-e(window).width())*2;if(x>e(window).width()){A.next(".tooltip-content").children(".tooltip-text").next().css("marginLeft",A.css("marginLeft")-(B-w));B-=(w+50);A.next(".tooltip-content").css({"min-width":B,left:B/-2})}}})}function c(y){if(y==undefined){y=e(".tooltip-icon")}if(!y.parents(".tooltip-container").hasClass("tooltip-empty")){y.next(".tooltip-content").addClass("visible");y.parents(".tooltip-container").addClass("visible")}var A=y.next().outerHeight(true);var z=y.next().outerWidth(true);var x=y.offset().top-e(document).scrollTop();var w;if(x<y.next(".tooltip-content").outerHeight(true)){y.parents(".tooltip-container").addClass("top-arrow");w=A+35-A}else{y.parents(".tooltip-container").removeClass("top-arrow");w=A*-1-20}y.next(".tooltip-content").css({top:w,left:z/-2})}function i(){e(".tooltip-content").removeClass("visible");e(".tooltip-container").removeClass("visible")}function j(w){g();w.append(e('<div class="overlay-white">'));e("body").css("overflow","hidden");e(".overlay-white").addClass("scrollable");b()}var p=function(){e(this).fadeOut(function(){e("body").css("overflow","initial");e("overlay-white").removeClass("scrollable")});e(".tooltip-content").removeClass("current")};var m=function(w){w.stopPropagation()};function b(){e(".overlay-white").on("click",p);e(".tooltip-container").on("click",m)}function g(){e(".overlay-white").fadeOut(function(){e("body").css("overflow","initial");e("overlay-white").removeClass("scrollable")})}var a=function(x){if(r.isMobile()){if(!e(this).hasClass("popover")){if(x){x.stopPropagation()}e(this).next(".tooltip-content").addClass("current");e(this).next(".tooltip-content").removeAttr("style");t=e(this).parent();j(t);e(window).off("click").on("click",i);e(".tooltip-content.current .close_tooltip").remove();var w=e(".data-holder.tooltip-exit").data("close-botton");window.setTimeout(function(){e(".tooltip-content.current").append(e("<a class='button close_tooltip'><span>"+w+"</span></a>"));window.setTimeout(function(){e(".close_tooltip").on("click",function(){e(".overlay-white").fadeOut(function(){e("body").css("overflow","initial");e(".overlay-white").removeClass("scrollable");e(".tooltip-content").removeClass("current")})})},100)},100)}}};function v(){e(".tooltip-icon").not(".onlyDesktop").on("click",a)}function o(){e(".tooltip-container").off(l,d);e(window).off(l,i);e(".tooltip-container").off("touchstart",h);e(window).off("touchstart",i);e(".tooltip-icon").off(n,u);e(".tooltip-icon").off(l,f);e(".overlay-white").off("click",p);e(".tooltip-container").off("click",m);e(".tooltip-icon").not(".onlyDesktop").off("click",a)}return{init:s}})}).call(this);