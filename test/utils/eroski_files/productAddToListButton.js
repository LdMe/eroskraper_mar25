(function(){define(["jquery","t5/core/zone","t5/core/dom","t5/core/events","common/scroll/customScroll"],function(g,c,r,f,m){var j={};function q(w,t){var v=w;var u=g("#"+t);d(u,v);n(u);s(u)}function b(t){var u=g("#"+t);k(u);a(u);h(u);setTimeout(function(){m.resetAll()},1);setTimeout(function(){g(".create-new-list .form-control").prop("disabled",false)},100)}function o(t){var u=g("#"+t);i(u)}function d(t,u){t.siblings().find("a").click(function(v){if(v){v.preventDefault()}e(t,u,g(this),false)});g(".save-list-button").off("click").on("click",function(v){if(v){v.preventDefault()}e(t,u,g(this),true)})}function e(t,v,w,u){clearTimeout(j[t.attr("id")]);l(w,u);if(w.hasClass("active")){w.removeClass("active");if(u){w.parent().find(".add-to-list").find(".add-list-box").slideUp()}else{w.parent().next().find(".add-list-box").slideUp()}return true}g(".add-list-box").slideUp();g(".add-to-list-button").removeClass("active");w.addClass("active");p(t);c.deferredZoneUpdate(t,v)}function l(u,t){var x;if(t){x=u.parent().find(".add-to-list").find(".add-list-box")}else{x=u.parent().next().find(".add-list-box")}var w=u.offset().top-g(document).scrollTop();var v=x.outerHeight();if(w+v>=g(window).outerHeight()){x.css("bottom","90%");x.addClass("bottom-arrow")}else{x.css("bottom","auto");x.removeClass("bottom-arrow")}}function n(t){r.onDocument(f.zone.didUpdate,t.selector,function(){if(t.closest(".add-to-list").find(".add-to-list-button").hasClass("active")){t.find(".add-list-box").slideDown()}if(t.parent().children(".add-to-list-button").hasClass("active")){t.find(".add-list-box").slideDown()}})}function s(t){g(window).on("click",function(u){if(g(u.target).closest(".add-to-list").length==0){t.find(".add-list-box").slideUp();t.closest(".add-to-list").find(".add-to-list-button").removeClass("active")}if(g(u.target).closest(".save-list-button").length==0){t.parent().children(".add-to-list-button").removeClass("active")}})}function k(t){t.find(".close-add-list-button").click(function(u){if(u){u.preventDefault()}g(this).parent(".add-list-box").slideUp();g(this).removeClass("active");g(this).closest(".add-to-list").find(".add-to-list-button").removeClass("active")})}function a(t){t.find(".add-list-box .create-list-button a").on("click",function(u){if(u){u.preventDefault()}if(g(this).parents(".add-list-box").find(".create-new-list").find("input").val().length===0){g(this).parents(".add-list-box").find(".info-input").css("display","block")}else{g(this).parents(".add-list-box").slideUp();g(this).closest(".add-to-list").find(".add-to-list-button").removeClass("active")}})}function h(t){t.find("input[name='listRadioGroup']").on("click",function(){g(this).closest("form").submit();g(this).parents(".add-list-box").slideUp();g(this).closest(".add-to-list").find(".add-to-list-button").removeClass("active")})}function i(t){t.find(".add-list-box").slideDown();j[t.attr("id")]=setTimeout(function(){t.find(".add-list-box").slideUp(400,"swing",function(){g(".create-new-list .form-control").prop("disabled",false);g(".create-new-list .form-control").blur()})},800)}function p(v){var x={};var w=v.closest(".add-to-list").closest(".product-border").siblings(".add-product").find(".quantity").data("product");if(!w){w=v.closest(".add-to-list").siblings(".add-product").find(".quantity").data("product")}if(!w){w=g(".best-seller").find(".add-product").find(".quantity").data("product")}var u=v.closest(".add-to-list").closest(".product-border").siblings(".product-description").find(".description-text").find(".product-title").find("a").first().text();if(g.isEmptyObject(u)){u=v.closest(".add-to-list").closest(".product-border").siblings(".product-description").find(".description-text").text()}if(g.isEmptyObject(u)){u=v.closest(".add-to-list").siblings(".product-description").find(".description-text").text()}if(g.isEmptyObject(u)){u=g(".market-product").find(".description-title").text()}if(v.siblings(".data-holder.basketType").length){x.basketType=g(v.siblings(".data-holder.basketType")[0]).data("basket-type")}if(w!=null&&u!=null&&!g.isEmptyObject(u)){x.productId=w;x.productDesc=u}else{var t=g(".order-addlist-button-ref").data("order-ref");if(t!=null){x.productId=t}else{x.productId="basket"}}v.attr("data-zone-parameters",JSON.stringify(x))}return{init:q,initInput:b,initMessage:o}})}).call(this);